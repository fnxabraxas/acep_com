
#------------------------------------------------------------------------------
#	Compiler
#------------------------------------------------------------------------------

CC = gcc

#------------------------------------------------------------------------------
#	CFI name
#------------------------------------------------------------------------------

CFI = wiki

#------------------------------------------------------------------------------
#	Active files dependency checking (e.g. header files)
#------------------------------------------------------------------------------

.KEEP_STATE :

#------------------------------------------------------------------------------
#	Set silent mode
#------------------------------------------------------------------------------

.SILENT :

#------------------------------------------------------------------------------
#       Korn shell
#------------------------------------------------------------------------------

SHELL = /bin/sh

#------------------------------------------------------------------------------
#	Compiler flags
#	==============
#
#        g              = debugging option
#        c              = Compile and assemble, but do not link
#        ansi           = ANSI maximal conformance
#        fno-math-errno = Return values for math routines in exceptional cases.
#                         In such cases, no exeception message will be printed,
#                         and errno will not be set
#        I              = header files directories
#
#------------------------------------------------------------------------------

CFLAGS = \
	-g \
	-c \
	-pedantic \
	-Wnested-externs \
	-fno-common \
	-fno-math-errno \
	-I../include \


#CFLAGS=-ansi -pedantic -Werror -Wall -W -Wmissing-prototypes  \
#       -Wstrict-prototypes -Wtraditional \
#       -Wshadow -Wpointer-arith -Wcast-qual -Wcast-align \
#       -Wwrite-strings -Waggregate-return -Wnested-externs \
#       -fshort-enums -fno-common -O3 -static\
#
#       -Wconversion  gives a warning when using FFTW

#	-ansi 
#	-fno-math-errno \

#------------------------------------------------------------------------------
#	CFI library directory
#------------------------------------------------------------------------------

CFI_LIB_DIR = ../lib/

#------------------------------------------------------------------------------
#	CFI library name
#------------------------------------------------------------------------------

CFI_LIB = $(CFI_LIB_DIR)/lib$(CFI).g.a

#------------------------------------------------------------------------------
#	Object files (Master files)
#	---------------------------
#
#	Check the Configuration Status List (CSL)
#
#------------------------------------------------------------------------------

OBJ =	pila.o \
	capicues.o \
	
#------------------------------------------------------------------------------
#	Makefile default target
#------------------------------------------------------------------------------

default : $(CFI_LIB)

#------------------------------------------------------------------------------
#	Library creation rules
#------------------------------------------------------------------------------

$(CFI_LIB) : $(OBJ)
	ar cr $(CFI_LIB) $?
	rm $(OBJ)

#------------------------------------------------------------------------------
#	Compilation rules
#------------------------------------------------------------------------------

%.o : %.c
	echo "--------------------"
	echo " compiling (with g)" $*.c
	echo "--------------------"
	$(CC) $(CFLAGS) $*.c -o $@

#------------------------------------------------------------------------------
#	Clean rules
#------------------------------------------------------------------------------

clean :
	\rm -f $(OBJ)
